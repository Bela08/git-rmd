<!DOCTYPE html>
<html>
  <head>
    <title>Version control</title>
    <meta charset="utf-8">
    <meta name="date" content="2019-03-24" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/fontawesome-all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="custom-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Version control
### 2019-03-24

---




class: exercise

# <i class="fas  fa-check "></i> Check-in

To follow along, you should have:

- a GitHub account - [create one now](https://github.com/) if you don't have one already!
- git installed and connected to RStudio (detailed installation instructions at [Happy Git with R](https://happygitwithr.com/workshops.html#pre-workshop-set-up))

---
This presentation is based on:

[Happy Git with R](http://happygitwithr.com)  
[NCEAS GitHub crash course](https://nceas.github.io/training-git-intro/getting-started-with-git-rstudio.html)  
[Ocean Health Index GitHub training](http://ohi-science.org/data-science-training/github.html)

---
background-image: url(http://www.phdcomics.com/comics/archive/phd101212s.gif)
background-position: center
background-size: auto 100%

---

# Why learn and use git/GitHub? 

- Version control
- Easy to share and distribute files, especially code/analyses
- Files accessible from anywhere with an internet connection
- Improves collaboration
- Contribute to open source!

--

_Git enables time travel &amp; alternate realities!_

---
background-image: url(https://media.giphy.com/media/kxAX99ncvbPk4/giphy.gif)
background-position: center
background-size: cover

---
# git

.pull-left[
Version control system that lives on your computer. Think "track changes" for files
]

.pull-right[
&lt;p&gt;&lt;img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Cropped-big-brother-is-watching-1984.png/800px-Cropped-big-brother-is-watching-1984.png" width=100%&gt;
]

---
# git is _not_

.pull-left[
- a full backup
- meant for data, images, etc

git works best with _text-based_ files!
]

.pull-right[
![](img/diffs.PNG)
]
---
# GitHub <i class="fab  fa-github "></i>

"Dropbox" for git-based projects on the internet. 

- share/store analyses and functions
- browse past versions of code
- browse source code ([CRAN](https://github.com/cran),  [tidyverse](https://github.com/tidyverse/), [rOpenSci](https://github.com/ropensci))
- use packages not on CRAN (`devtools::install_github("account/repo")`)
- host web pages  

--
&lt;br&gt;  
You get unlimited private GitHub repositories for _free_ (used to be $7/month)! 

---
background-image: url(http://ohi-science.org/data-science-training/img/commit_compare_3.png)
background-position: center
background-size: auto 100%

---
# GitHub terminology

- **repository** or repo - project/folder <i class="fas  fa-folder "></i>
- **local** - files stored on your computer <i class="fas  fa-file-code "></i> <i class="fas  fa-file-image "></i> <i class="fas  fa-file-excel "></i>
- **remote** - files on github.com <i class="fab  fa-github "></i>

---


class: inverse, center, middle

# GitHub: let's get oriented!  
---
class: exercise

Take a moment to explore this repository: 

# https://github.com/isteves/typos

- What is the repository name?
- When was the repository first created?
- What changes have been made to the repository?
- What issues have been submitted?
- What pull-requests (PRs) have been submitted?
- Are there any forks or branches?

---
background-image: url(img/github-account.png)
background-position: center
background-size: 100%
---
background-image: url(img/github-copies.png)
background-position: center
background-size: 100%
---
background-image: url(img/github-commits.png)
background-position: center
background-size: 100%
---
class: exercise

# Let's create a repo from scratch...  
### (choose a unique name!)

.center[
![](img/github-new.png)
] 

- don't use special characters
- name it `something_meaningful` and `not-too-long`
- note for advanced users: R packages cannot take underscores or dashes
---
class: inverse
background-image: url(http://ohi-science.org/data-science-training/img/create_repository_2.png)
background-position: center
background-size: 100%

---

# Alternative workflow

If you want to work off of an existing repository on GitHub...

1. **Fork a repo** = make a copy of the repo on your account
2. **Make a branch** = start an alternate timeline
3. **Make a change**
4. **Examine the differences**

It's good practice to keep your "master" branch clean so that you can keep it synchronized with the original repository

---

class: inverse, center, middle

# Let's connect to RStudio!

---
class: inverse
background-image: url(http://ohi-science.org/data-science-training/img/clone_step1.png)
background-position: center
background-size: 100%
---
class: inverse
background-image: url(http://ohi-science.org/data-science-training/img/new_project_1.png)
background-position: center
background-size: 100%
---
class: inverse
background-image: url(http://ohi-science.org/data-science-training/img/new_project_2.png)
background-position: center
background-size: 100%
---
class: inverse
background-image: url(http://ohi-science.org/data-science-training/img/new_project_3.png)
background-position: center
background-size: 100%
---
class: inverse
background-image: url(https://media.giphy.com/media/vt4gALQsxCDmM/giphy.gif)
background-position: center
background-size: 100%
---
class: inverse
background-image: url(https://media.giphy.com/media/vt4gALQsxCDmM/giphy.gif), url(http://ohi-science.org/data-science-training/img/new_project_4.png)
background-position: bottom right, center
background-size: 30%, 100%

---
class: inverse, center, middle

# Inspect your repository

---
class: inverse
background-image: url(http://ohi-science.org/data-science-training/img/RStudio_IDE_git.png)
background-position: center
background-size: 100%

---
You now have a GitHub PROJECT!

&lt;img src="img/github-proj.png" width=80%&gt;

https://speakerdeck.com/jennybc/workflow-you-should-have-one

---
# What's the deal with projects?

Each project is a self-contained set of files. Projects make it **easy to transfer** files to another computer because its **boundaries are clearly defined**

.center[
&lt;img src="img/project.jpg" width=50% align="center"&gt;
]
---
# Use relative paths inside projects
 
- looks cleaner
- works for other people/computers


```r
read.csv("data/eilat_survey_2017.csv")
#rather than
read.csv("C:/חזי/phd/thesis/reef_surveys/data/eilat_survey_2017.csv")
```

You never have to use `setwd()` again! 

--

**Pro tip:** use `here::here()` to deal with path differences across Rmd's, R scripts, and Shiny apps.
---

class: exercise

# Practice time

1. Open an Rmd file in the project you created before
2. Choose the type of document you want to create
3. Write some plain text and some analyses in the code chunk
4. Click on the knit botton at the top bar (or ctrl/cmd + shift + K)

---
class: inverse, center, middle
# Basic git flow ~ courtship cycle 
---
# First, **pull** them in

.center[
&lt;img src="img/pull.jpg" width=60%&gt;
]
---
# Then, **stage** &amp; **commit**

.center[
&lt;img src="img/commit.jpg" width=60%&gt; 
]
---
# Finally, **push** out babies 

.center[
&lt;img src="img/push.jpg" width=60%&gt; 
]
---
background-image: url(http://ohi-science.org/data-science-training/img/push_pull_clone.png)
background-position: center
background-size: auto 90%

---
# Sync from RStudio to GitHub

.center[
![](http://ohi-science.org/data-science-training/img/commit_overview.png)
.img-small[
[![http://www.rstudio.com/wp-content/uploads/2016/01/rstudio-IDE-cheatsheet.pdf](img/version-control-rstudio-cheatsheet.PNG)](http://www.rstudio.com/wp-content/uploads/2016/01/rstudio-IDE-cheatsheet.pdf)
]
]

---
background-image:url(img/pull.jpg), url(http://ohi-science.org/data-science-training/img/pull.png)
background-position: bottom right, center
background-size: 30%, 100%
---
background-image:url(img/commit.jpg), url(http://ohi-science.org/data-science-training/img/staged.png)
background-position: bottom right, center
background-size: 30%, 100%
---
background-image:url(img/commit.jpg), url(http://ohi-science.org/data-science-training/img/commit.png)
background-position: bottom right, center
background-size: 30%, 100%
---
background-image:url(img/push.jpg), url(http://ohi-science.org/data-science-training/img/push.png)
background-position: bottom right, center
background-size: 30%, 100%
---
background-image: url(img/github-flow.png)
background-position: center
background-size: 90%
---
class: inverse, center, middle
# Host Rmd's online with GitHub Pages
---
background-image: url(img/github-pages.PNG)
background-position: center
background-size: 90%
---
# A few tricks

- Use `index.html` to set a home page for your repo: username.github.io/reponame = username.github.io/reponame/index.html
- use `toc_float` to add a floating table of contents to your RMarkdown webpage (more details [here](https://bookdown.org/yihui/rmarkdown/html-document.html))


```r
---
output:
  html_document:
    toc: true
    toc_float: true
---
```

---
class: inverse, center, middle
# Let's collaborate!
---

class: exercise

# <i class="fas  fa-check "></i> Check-in

You should have:
- a repository on GitHub
- an RProject linked to the GitHub repository 

---

class: exercise

Go into `Settings` --&gt; `Collaborators`.  Add your neighbor as a collaborator

![](http://ohi-science.org/data-science-training/img/github_collab.png)

---

class: exercise

# Try this!

Switch over to your _neighbor's_ repo:

1. Accept your neighbor's invitation
2. Create a GitHub RStudio project
3. Make a change
4. Pull + stage/commit + push

---

class: inverse, center, middle
# GITting stuck - how to save yourself
---
# https://happygitwithr.com/

Ultimate guide for R/RStudio workflows with git/GitHub

- installation problems
- connecting GitHub to an RStudio project (or vice versa)
- setting up ssh
- how to "burn it all down" <i class="fas  fa-fire "></i>

---
# Use the terminal

Most of the resources online tell you what series of `git` commands to use to achieve your goal. The **terminal** is where you can type those commands

.center[
.img-small[
![](img/terminal.png)
]]
---
# There's more!  

Check out these resources for step-by-step guides for:

- using `gitignore` to tell git what NOT to track
- dealing with merge conflicts
- collaborating using forks and branches
- burning it all down &amp; starting afresh

[Happy Git with R](http://happygitwithr.com)  
[NCEAS GitHub crash course](https://nceas.github.io/training-git-intro/getting-started-with-git-rstudio.html)  
[Ocean Health Index GitHub training](http://ohi-science.org/data-science-training/github.html)
    </textarea>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
